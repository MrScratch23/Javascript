<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>7b - Cargar JS din√°micamente</title>
	<meta name='Generator' content='Zim 0.76.3'>
	<style type='text/css'>
	    @import url('https://fonts.googleapis.com/css2?family=Montserrat&family=Jost&display=swap');
	    :root {
  			--html-background-color: #456;
  			--html-background-color-image: linear-gradient( 0deg, rgba(24,95,240,1) 16.4%, rgba(5,23,111,1) 70% );
  			
  			--main-color: #47b;
  			--main-background-color: #fff;
  			
  			--heading1-color-text: #eeffff;
  			--heading1-background-color: #47b;
  			--heading1-background-image: linear-gradient(to right, var(--main-color), #70bbdd);
  			
  			--code-color-text: #247;
  			
  			--input-background-color: #33a;
  			--input-background-color-hover: #44b

		}

	    html       { /*background-image: linear-gradient(#f2faff,#fff);*/
background-color: var(--html-background-color);
background-image: var(--html-background-color-image);
	    }
	    body       { font-family: 'Jost', 'Noto', 'Arial', 'Sans-serif';
	    				margin:0;
	                 }
	    div#contenido{
	    	margin: 0 auto; padding: 1rem; max-width: 90ch;
	    	background-color: var(--main-background-color);
	    	margin-bottom: 200px;
	    	border-bottom-right-radius: 100px;
			border-bottom: 5px solid darkblue;
			box-shadow: 0px 10px 10px -1px #1e90ff10, 
						  10px 30px 20px -1px #1e90ff40, 
						 -10px 30px 20px -1px #1e90ff40;			
	    }
	    input[type="button"]{
	                 background-color: var(--input-background-color);
                     color: white;
                     border-radius: 5px;
                     border: 3px solid #44b;
                     cursor: pointer;
                     padding: 0.5rem;
                     margin-left: 0.5rem;
                     margin-right: 0.5rem;
                     transition: margin-all 3s ease-in-out 3s;
        }
        input[type="button"]:hover{
	                 background-color: var(--input-background-color-hover);
        }
        input[type="button"]:active {
			  transform: translateY(2px);
			  cursor: progress;
		  }
		a,a:visited  { text-decoration: none;color:blue;      }
		a:hover    { text-decoration: underline; color: dodgerblue; }
		a:active   { text-decoration: underline }
		strike     { color: grey                }
		u          { text-decoration: none;
					 background-color: yellow   }
		tt         { color: var(--code-color-text);
				    	 font-size: large;
		             background-color: rgba(.99, .99, 1, 0.1); 
		           }
		pre        { color: var(--code-color-text);
		             background-color: rgba(.99, .99, 1, 0.1);
					 padding: 20px;
					 font-size: large;
					 overflow-x: scroll;
				   }
		div.zim-object pre        {
		             background-color: white;
					 padding: 0px;
				   }				   
		h1         { font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
		             text-decoration: none;
					 /*color: #33a;
					 border-bottom: 5px dotted #33a;*/
					 /*margin-top: 2rem; 
					 margin-bottom: 1rem; 
					 
					 border-radius: 5px;
					 padding: 5px;
					 color: var(--heading1-color-text);
					 background-color: var(--heading1-background-color);
					 background-image: var(--heading1-background-image);
					 
					 font-size: xxx-large;*/
					font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
					text-decoration: none;
					margin-top: 2rem;
					margin-bottom: 2rem;
					border-radius: 2px;
					padding: 5px;
					color: var(--heading1-color-text);
					background-color: var(--heading1-background-color);
					background-image: linear-gradient(45deg, #0bb,#3fb,#78F);
					font-size: xxx-large;
					position: relative;
					z-index: 1;
					box-shadow: 5px 5px 0px 2px rebeccapurple;
				   }
	h1::before {
		  content: '';
		  position: absolute;
		  background-color: navy;
			transform: skewY(-8deg) rotate(7deg);
			top: -16px;
			left: 0;
			right: 0;
			bottom: 16px;
			z-index: -1; /*detr√°s del texto, pero delante del fondo */
	  }
		h2         { font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
		             color: var(--heading1-background-color); 
		             margin-bottom: 0.5rem;
		             margin-top: 1.5rem;
		             font-size: xx-large;
		             border-bottom: 2px solid var(--heading1-background-color);
		           }
		h3         { 
		             font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
		             color: var(--heading1-background-color); 
		             margin-bottom: 0.5rem;
		             margin-top: 1.5rem;
		             font-size: x-large;
		             font-style: italic;
		             margin-left: 0.5rem; 
		           }
		h4         { 
		             font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
		             color: var(--heading1-background-color); 
		             margin-bottom: 0.5rem;
		             margin-top: 1.5rem;
		             margin-left: 1rem;
		             filter: brightness(1.1);
		           }
		h5         { 
		             font-family: 'Montserrat', 'Noto', 'Roboto', 'Arial', 'Sans-serif';
		             color: var(--heading1-background-color);  
		             margin-bottom: 0.5rem; 
		             margin-top: 1.5rem;
		             filter: brightness(1.1);
		           }
		p          { margin-top: 0.25rem;  }
		span.zim-tag {
			color: #ce5c00;
		}
		img{
		    scale: 75%;
		    max-width:100%;
		    margin: 0 auto; /* para centrar las im√°genes */
			 display: flex; /* para centrar las im√°genes */
		}
		img:hover{
		    scale: 100%;
		    max-width:100%;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}
		form{
            padding: 0.5rem;
            background-color: #125;
            border-radius: 0px;
            text-align: center;
            margin-bottom: 1rem;
		}
		ul{
		    list-style-type: '‚ñ™Ô∏è '; /*square*/
		}
		div#sumario{
            margin: 0 auto; 
            padding: 1rem; 
            max-width: 90ch;
            background-color: aquamarine; /*greenyellow;/*moccasin;*/
/*            background-image: radial-gradient( circle farthest-corner at 10% 20%,  rgba(166,239,253,1) 0%, rgba(97,186,255,1) 90.1% );
*/
				background-position:bottom;
				background-repeat: no-repeat;
				background-image: url('data:image/svg+xml, <svg preserveAspectRatio="none" viewBox="0 0 1200 120" xmlns="http://www.w3.org/2000/svg" style="fill: %23ffffff; width: 100%; height: 180px; transform: rotate(180deg);" ><path d="M321.39 56.44c58-10.79 114.16-30.13 172-41.86 82.39-16.72 168.19-17.73 250.45-.39C823.78 31 906.67 72 985.66 92.83c70.05 18.48 146.53 26.09 214.34 3V0H0v27.35a600.21 600.21 0 00321.39 29.09z" /></svg>');

            /*border-radius: 0px;*/
            border-top-right-radius: 152px;
		}
		div#sumario a {
			color:#0000dd;
		}
		div#sumario h1{
			margin-right: 300px;
			text-align: center;
			box-shadow: 5px 5px 0px 2px white;
		}
		div#volver{
		    position: fixed;
            right: 0.5rem;
            bottom: 0.5rem;
            padding: 0.5rem;
            border: 3px solid #7af;
            border-radius: 50%;
		}
		div#volver:hover {
			filter: brightness(1.2) saturate(1.2);
		}
		div#pie{
			min-height: 200px; 
			/*background-color: #47b;*/
			color: #cef;
			display: flex; 
			justify-content: center; 
			align-items: center; 
			position: fixed; 
			bottom:0; left:0; right: 0;
			z-index: -1;
			background-image: linear-gradient( 0deg, rgba(0,0,0,0.6) 0%, rgba(255,255,255,0) 100% );
			font-size: larger;
			text-align:center;
		}
		div#pie a{
			color: deepskyblue;
		}
		pre.codigo{
			border: 1px solid blue;
			padding: 5px;
			background-color: aliceblue;
			border-radius: 5px;
		}
		
		div.codigoresultado{
			background-color: #469;
			color: whitesmoke;
			padding: 5px;
			border-radius: 5px;
		}
		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		.migrated-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB+AKHREFA8vJSnkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC1klEQVRIx+2VT0hUURTGf/e958w4Tc3TYowMw1GyEgwr1MqsFmbZIrIWQZsWJUjbdoHQpl3Qps0swnCRECQFYkR/TC1iKkqmfzAKTo2Vf8hoRsfR995tkRMT87RRWkUHHhy495zvnvvu933wP/75EKkkEAjIYDCIaZpIKRFCZN0kfX9xcTGtra2/irVUEolECIfDlJeXo+s6hmFkDaCqKoZhEAqFSCaTv60pqcSyLAoLC/F4PEtqDmCaJkIIKisrMybX0sdUVRWA5ubmPzdNjjI1cpXkZC/O1fV03PXgdDqRUtpPIITAsqxsDz0Z/3CZQv8uqo4N4C8/Tp2/DdM0MiZQlvk41OTkI/LW1SGtCVb5drD3eCc71wcA+VcAHA5vDd8+3UGakxiJV7i9pdQevU5T1R35pJ3MV5QW1pf+0kWBheJ2SWua8EQXZXsu4fVVYEz1sEKvof5EuxjoPvzpcRvrdp9C2gGMx6cpOHBmbImMesds7BZubwMVDTfXDnQ3vQfK7AC8wLfExMX5whyQc3q2OEnjGm5vE76SQxsfBLr77a7CNf+n0r/l6sSMtsBSnurckiIILCobAtVZhpF4gZF4jubaymj4Ch/fd380LE7bAnjc0NPxk2yqpmEuwGxF0ag+0k5uTpzZeBeaazvj0We8fXojainsb2xh2BZgbe0gSIllzSIUh63wfQ6dZ/O2fbjcKlOj58jJ3cVENESw5yErc9nf2MLQ4jwQAkV1Lqiq37/cZ9WaahJjF9AcmxiPDhLs7ePe23oOnmUwg2hSShQle96tKDjA2HAniusgo9FxnvY9Jxw7RWzGYy92QghM00x5g53qp9sHmtB58/o2umOI2NwGolMnMYUHIb7aAyiKwsjICLqu2/qBEIKUUAohMaSHSLyBSMoPTINQ6CX5+fn2AEVFRZSUlBCPx4nFYhl3L4RESjF/GEgX3pSj+Xw+/H7/b3U/AEOZFnp7O5+5AAAAAElFTkSuQmCC)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */

		@media print {
			div#pie{display:none;}
			div#volver{display:none;}
			form{display:none;}
			div#sumario{display:none;}
			/* Evitar que las im√°genes se corten en Google Chrome, en FF parece que lo ignora */
			img {
				page-break-inside: avoid;
			}
			div#contenido{
				border:0px;
				box-shadow: none;
			}
		}

		table {
			border: 1px solid var(--main-color);
		}
		thead {
			background-color: var(--heading1-background-color);
		}
		tr:nth-child(2n) {
			background-color: color-mix(in srgb, var(--main-color) 20%, transparent);
		}
		td {
			padding-inline: 0.5rem;
		}
		th {
			padding-inline: 0.5rem;
			padding-block: 0.25rem;
		}

	</style>
	
	<!-- resaltado de sintaxis -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
	<!-- and it's easy to individually load additional languages -->
	<!-- script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/php.min.js"></script -->


</head>
<body>
    <form>
    <input type="button" id="btnAmpliar" value="Ampliar margen">
    <input type="button" id="btnReducir" value="Reducir margen">
    <input type="button" id="btnSumario" value="Ver/ocultar sumario">
    </form>


<div id="sumario" style="display:none">
<h1>Sumario</h1>
<!-- Sumario --> 
            <a href="#h1">7b - Cargar JS din√°micamente</a> <br>
            <a href="#h2">M√≥dulos en Javascript</a> <br>
            &nbsp; &nbsp; <a href="#h3">Modulos aut√≥nomos</a> <br>
            &nbsp; &nbsp; <a href="#h4">M√≥dulos</a> <br>
				&nbsp; &nbsp; &nbsp; &nbsp; Importar todo el m√≥dulo <br>
        <!-- ocultamos el contenido entre ocultar y finocultar -->
				&nbsp; &nbsp; &nbsp; &nbsp; Importar con alias <br>
        <!-- ocultamos el contenido entre ocultar y finocultar -->
				&nbsp; &nbsp; &nbsp; &nbsp; Export default <br>
        <!-- ocultamos el contenido entre ocultar y finocultar -->
            <a href="#h8">Carga din√°mica de un m√≥dulo</a> <br>
            &nbsp; &nbsp; <a href="#h9">El problema con la exportaci√≥n por defecto</a> <br>
            <a href="#h10">Carga din√°mica de un script</a> <br>
        
        
            <a href="#h13">Ejercicios</a> <br>
        
        
</div>
<!-- Sumario -->


<div id="contenido">

<!-- contenido -->
			<h1 id="h1">7b - Cargar JS din√°micamente</h1>
			<p>
M√°s informaci√≥n sobre m√≥dulos:
</p>
<ul style='padding-left: 30pt'>
<li><a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Guide/Modules" title="https://developer.mozilla.org/es/docs/Web/JavaScript/Guide/Modules" class="https">https://developer.mozilla.org/es/docs/Web/JavaScript/Guide/Modules</a></li>
<li><a href="https://acrossverse.me/stories/how-javascript-modules-work" title="https://acrossverse.me/stories/how-javascript-modules-work" class="https">https://acrossverse.me/stories/how-javascript-modules-work</a></li>
</ul>
<br>
<br>

			<h1 id="h2">M√≥dulos en Javascript</h1>
			<p>
Un m√≥dulo en Javascript es simplemente un fichero de c√≥digo que ser√° usado por otro fichero. Esta es el mecanismo moderno para dividir programas creados en Javascript en trozos que se pueden importar cuando sea necesario, de manera que el c√≥digo pueda estar m√°s organizado y ser m√°s peque√±o al poder cargar un m√≥dulo s√≥lo cuando se vaya a usar de manera as√≠ncrona.
</p>
<br>
<p>
<b>Importante</b>: necesitamos un servidor web para poder usar m√≥dulos y, adem√°s, un m√≥dulo s√≥lo puede ser usado por otro m√≥dulo.
</p>
<br>
<br>

			<h2 id="h3">Modulos aut√≥nomos</h2>
			<p>
Son m√≥dulos que contienen c√≥digo que ser√° ejecutado inmediatamente sin interactuar con el resto del c√≥digo. Cuando sean importados, se ejecutar√°n, realizar√°n alguna tarea y devolver√°n el control al m√≥dulo que los carg√≥.
</p>
<br>
<p>
No existe un t√©rmino est√°ndar para refereirse a este tipo de m√≥dulo, por lo que tambi√©n podr√≠an llamarse m√≥dulos autocontenidos, autoejecutables, aut√≥nomos o simplemente m√≥dulos aislados.
</p>
<br>
<p>
Por ejemplo, supongamos que tenemos una web con un <tt>&lt;input type="number" id="dato" value="79"&gt;</tt>. Esta web carga como m√≥dulo el fichero <tt>code.js</tt> que a su vez carga el m√≥dulo <tt>cuadrado.js</tt>:
</p>
<br>
<p>
Trozo del <tt>index.html</tt> (f√≠jate que se usa <tt>type="module"</tt> y no hay <tt>defer</tt>):
</p>
<pre>
...
  &lt;script type="module" src="code.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Carga din√°mica&lt;/h1&gt;
  &lt;input type="number" name="dato" id="dato" value="79"&gt;
  &lt;button type="button" id="btnAccion"&gt;Acci√≥n&lt;/button&gt;
...
</pre>
<br>
<p>
Fichero <tt>code.js</tt>:
</p>
<pre>
console.log("Probando las importaciones de un m√≥dulo aut√≥nomo");
alert("Bienvenido");

// importaci√≥n del m√≥dulo cuadrado.js
import './cuadrado.js';

document.querySelector("#btnAccion").addEventListener("click", e=&gt;{
  console.log("Bot√≥n pulsado");
  cuadrado(7);
});
</pre>
<br>
<p>
Fichero de m√≥dulo <tt>cuadrado.js</tt>:
</p>
<pre>
console.info("M√≥dulo cargado correctamente");
const cuadrado = n =&gt; n*n;
const valor = document.querySelector("#dato").value;
console.log(`El cuadrado de ${valor} es ${cuadrado(valor)}`);
</pre>
<br>
<p>
El resultado de la ejecuci√≥n en la consola ser√° el de la imagen de abajo:<br>
<img src="./7b_-_Cargar_JS_din√°micamente_files/pasted_image.png">
</p>
<br>
<p>
Cosas a tener en cuenta:
</p>
<ul style='padding-left: 30pt'>
<li>Desde el <tt>index.html</tt> se ha cargado el fichero <tt>code.js</tt> con <tt>&lt;script type="module" src="code.js"&gt;&lt;/script&gt;</tt>, porque <b>un m√≥dulo s√≥lo puede ser cargado desde otro m√≥dulo.</b></li>
<li>El fichero <tt>code.js</tt> se carga sin usar el <tt>defer</tt>, este ya es el comportamiento por defecto de los m√≥dulos y no es necesario indicarlo.</li>
<li>Aunque cargues varias veces el mismo m√≥dulo, s√≥lo ser√° cargado y ejecutado una √∫nica vez.</li>
<li>El orden en el que se han ejecutado las operaciones no parece el intuitivo, <b>primero se ha ejecutado el m√≥dulo y luego el resto del c√≥digo</b>. Esto es, sin embargo, el comportamiento esperado. En el parseado inicial del fichero <tt>code.js</tt>, el navegador <b>importa el m√≥dulo y lo ejecuta inmediatamente</b> antes de pasar a ejecutar el propio <tt>code.js</tt>. <b>Este proceso es s√≠ncrono</b>.</li>
<li><b>Si pulsamos el bot√≥n, saldr√° un error en la consola</b> indicando que la funci√≥n <tt>cuadrado()</tt> no est√° definida, <b>esa funci√≥n s√≥lo existe en el m√≥dulo</b> <tt>cuadrado.js</tt></li>
<li>Por todo esto el uso de este tipo de m√≥dulos est√° muy limitado, pero podr√≠a usarse por ejemplo para que al acceder a la p√°gina principal se realizase una petici√≥n a un servidor que devolviera los 5 productos de oferta de la semana y los mostrase en la p√°gina.</li>
</ul>
<br>
<br>

			<h2 id="h4">M√≥dulos</h2>
			<p>
Normalmente los m√≥dulos que vamos a utilizar no ser√°n aut√≥nomos. Sino que se crear√°n para definir funciones o constantes que ser√°n utilizados desde el fichero que los ha importado.
</p>
<br>
<p>
Por ejemplo, imagina este m√≥dulo definido en el fichero <tt>saludoModulo.js</tt>
</p>
<pre>
export function saludo(nombre){
  if(nombre)
    saludoNombre(nombre);
  else
    saludoNombre("");
}

export function saludoCaracola(){
  saludoNombre("caracola");
}

function saludoNombre(nombre){
  alert("Hola " + nombre);
}

export const nombreAutor = "Javier Mancera";
</pre>
<br>
<p>
La palabra clave <tt>export</tt> simplemente indica qu√© funciones ser√°n utilizables desde fuera del m√≥dulo por el fichero que lo ha importado.
</p>
<br>
<p>
En lugar de indicar qu√© funciones o constantes se quieren exportar una a una, se puede indicar al final del m√≥dulo en una √∫nica instrucci√≥n <tt>export</tt>:
</p>
<pre>
export { saludo, saludoCaracola, nombreAutor };
</pre>
<br>
<p>
De una u otra forma, con <tt>export</tt> marcamos los componentes que queremos exportar desde nuestro m√≥dulo (no tenemos por qu√© exportar todo, podemos tener funciones auxiliares que no tienen por qu√© ser exportadas) y otro m√≥dulo podr√° usarlo import√°ndolo completo o importando s√≥lo las funciones que le interese, por ejemplo:
</p>
<br>
<p>
Fichero <tt>code.js</tt>:
</p>
<pre>
import {saludo, saludoCaracola} from './saludoModulo.js';
saludo();
saludo("Javier");
saludoCaracola();
</pre>
<br>
<br>
<p>
Algunas cuestiones sobre los m√≥dulos:
</p>
<ul style='padding-left: 30pt'>
<li>Los m√≥dulos importados de esta manera, <b>ser√°n evaluados inmediatamente</b>, lo que habr√° que tenerlo en cuenta para mejorar la experiencia del usuario.</li>
<li>Los m√≥dulos siempre se ejecutan <b>en modo estricto</b>.</li>
<li>Los m√≥dulos <b>tiene su propio √°mbito (scope)</b>, as√≠ que una variable definida globalmente en un m√≥dulo no se podr√° usar en otro script a menos que sea exportada tambi√©n (est√°n aislados y encapsulan el c√≥digo).</li>
<li>Un m√≥dulo <b>se eval√∫a una √∫nica vez</b> aunque se intente cargar varias veces.</li>
<li>Se ejecuta en diferido de la misma manera que un script cargado con <tt>defer</tt>.</li>
<li>Los m√≥dulos necesitan un servidor para ser cargados.</li>
<li>Un m√≥dulo exporta un objeto de exportaci√≥n <tt>export { saludo, saludoCaracola, nombreAutor };</tt> que es usado en la importaci√≥n.</li>
</ul>
<br>
<p>
Por estas razones, muchas bibliotecas de funciones se distribuyen en forma de m√≥dulos.
</p>
<br>
<br>

            
				<h3>Importar todo el m√≥dulo<a id="importar-todo-el-m√≥dulo" class="h_anchor"></a></h3>
<p>
Podemos importar todo el m√≥dulo en un objeto as√≠:
</p>
<pre>
import * as saludos from './saludoModulo.js';

saludos.saludo( saludos.nombreAutor );
</pre>
<br>
<br>
 <br>
            
				<h3>Importar con alias<a id="importar-con-alias" class="h_anchor"></a></h3>
<pre>
import { saludo, saludoCaracola as holaCaracola } from './saludoModulo.js';

holaCaracola();
saludo();
</pre>
<br>
<br>
 <br>
            
				<h3>Export default<a id="export-default" class="h_anchor"></a></h3>
<p>
Podemos usar la palabra reservada <tt>default</tt> para definir una funci√≥n o constante que se exportar√° por defecto.<br>
Podemos tener varias exportaciones en un m√≥dulo, pero <b>s√≥lo una pueder ser la exportaci√≥n por defecto</b>.
</p>
<br>
<pre>
function saludo(nombre){
  alert("Hola, " + nombre);
}
export default saludo;
</pre>
<br>
<p>
Y se usar√≠a as√≠ (<b>sin llaves</b>):
</p>
<pre>
import saludo from './saludoModulo.js';
saludo("Javier);
</pre>
<br>
<p>
Tambi√©n se puede aprovechar que vamos a importar s√≥lo la exportaci√≥n por defecto para cambiarle el nombre a uno que nos guste m√°s:
</p>
<pre>
import hola from './saludoModulo.js';
hola("Javier);
</pre>
<br>
<p>
Tambi√©n se pueden combinar exportaciones normales con una por defecto:
</p>
<pre>
export function saludo(nombre){
  if(nombre) saludoNombre(nombre);
  else saludoNombre("");
}

export default function saludoCaracola(){ // exportaci√≥n por defecto
  saludoNombre("caracola");
}

function saludoNombre(nombre){
  alert("Hola " + nombre);
}

export const nombreAutor = "Javier Mancera";
</pre>
<br>
<p>
Y son cargadas por separado (adem√°s le cambiamos el nombre a la exportaci√≥n por defecto):
</p>
<pre>
import decirHola, {nombreAutor} from './saludoModulo.js';
decirHola();
alert(`El autor: ${nombreAutor}`);
</pre>
<br>
<br>
 <br>
			<h1 id="h8">Carga din√°mica de un m√≥dulo</h1>
			<p>
Los m√≥dulos son una manera conveniente de a√±adir funcionalida da una web, pero en cuanto al tiempo de carga de una web no se diferencia de los scripts cargados con <tt>defer</tt>.
</p>
<br>
<p>
<b>Nota</b>: Tal y como hemos estado usando los m√≥dulos hasta ahora simplemente son una buena manera de organizar el c√≥digo evitando tener que a√±adir etiquetas <tt>&lt;script&gt;</tt> en el HTML. Si un fichero <tt>a.js</tt> necesita uno <tt>b.js</tt> para funcionar lo cargamos desde <tt>a.js</tt> y no desde el HTML, as√≠ si dejamos de usar la biblioteca <tt>a.js</tt> no tendremos que eliminar del <tt>&lt;head&gt;</tt> las etiquetas <tt>&lt;script&gt;</tt> de <tt>a.js</tt> y <tt>b.js</tt> (podr√≠amos olvidar eliminar <tt>b.js</tt> y seguir√≠amos carg√°ndolo aunque ya no lo us√°semos).
</p>
<br>
<p>
Imaginemos que en nuestra web se muestra un conjunto de datos, por ejemplo una factura o las notas de unos alumnos, tambi√©n tenemos un bot√≥n para convertir los datos a PDF y otro para crear una hoja de c√°lculo con los datos. Seg√∫n las estad√≠sticas de uso de la aplicaci√≥n, los datos s√≥lo <b>se convierten a PDF una de cada veinte veces</b> que se muestran. Y a una <b>hoja de c√°lculo s√≥lo una de cada cuarenta veces</b> que se muestran. Adem√°s, rara vez se usan las dos funcionalidades en la misma sesi√≥n.
</p>
<br>
<p>
Tenemos un m√≥dulo o script que usamos para crear un PDF y otro que usamos para crear una hoja de c√°lculo. ¬øTiene sentido <b>cargar estos scripts siempre aunque el usuario no los use</b>? ¬øY sobre todo cargar los dos m√≥dulos aunque s√≥lo se usar√° uno, si es que se llegan a usar? Probablemente no, estamos cargando bibliotecas pesadas y empeorando la experiencia normal del usuario por si acaso el usuario lo necesitase.
</p>
<br>
<p>
Una alternativa es <b>cargar estos m√≥dulos din√°micamente cuando se pulse un bot√≥n de exportar a PDF o a Hoja de c√°lculo</b>. Al ser m√≥dulos, la primera vez que se pulsen se realizar√° la carga del m√≥dulo, la segunda vez el sistema reconocer√° que ya est√°n cargados y no volver√° a realizar la petici√≥n.
</p>
<br>
<p>
La carga din√°mica de un m√≥dulo podr√≠a crearse usando el c√≥digo de abajo. Se consigue usando la funci√≥n <tt>import(ficheroModulo)</tt>. Esto cargar√° el m√≥dulo completo cuando se ejecute y devuelve una promesa.
</p>
<br>
<p>
Fichero <tt>code.js</tt>:
</p>
<pre>
const divResultado = document.querySelector("#divResultado");

document.querySelector("#btnAccion").addEventListener("click", async e=&gt;{
  try{
    let moduloSaludo = await import("./saludoModulo.js");
    moduloSaludo.saludo();
  }
  catch(error){
    divResultado.innerHTML = error +" Error al cargar la biblioteca";
  }
});
</pre>
<br>
<p>
<b>Nota</b>: El fichero code.js ahora no necesita ser un m√≥dulo.
</p>
<br>
<br>

			<h2 id="h9">El problema con la exportaci√≥n por defecto</h2>
			<p>
Si recuerdas, en el m√≥dulo <tt>saludoModulo.js</tt> defin√≠amos una funci√≥n con <tt>export default function saludoCaracola()</tt>. A la hora de utilizarlo habr√° que tenerlo en cuenta, porque esa funcion se exportar√° con el nombre de <tt>default</tt> y no como <tt>saludoCaracola</tt>.
</p>
<br>
<p>
Un ejemplo de uso ser√≠a el de abajo importando el m√≥dulo en un objeto <tt>moduloSaludo</tt> (f√≠jate que se usa <tt>moduloSaludo.default()</tt>):
</p>
<pre>
document.querySelector("#btnAccion").addEventListener("click", async e=&gt;{
  try{
    const moduloSaludo = await import("./saludoModulo.js");
    moduloSaludo.saludo();
    moduloSaludo.default(); // la funci√≥n que se exporta por defecto
    console.log(moduloSaludo.nombreAutor);    
  }
  catch(error){
    divResultado.innerHTML = error +"&lt;p&gt;Error al cargar la biblioteca&lt;/p&gt;";
  }
});
</pre>
<br>
<p>
Otra manera ser√≠a la de abajo, usando una descomposici√≥n del objeto de exportaci√≥n, el √∫nico problema es que la funci√≥n por defecto se importar√≠a como <tt>default</tt>, pero esta <b>es una palabra reservada</b> del lenguaje, por lo que se renombra con <tt>default:holaCaracola</tt>:
</p>
<pre>
document.querySelector("#btnAccion").addEventListener("click", async e=&gt;{
  try{
    const {saludo, default:holaCaracola, nombreAutor} = await import("./saludoModulo.js");
    saludo();
    holaCaracola();
    console.log(nombreAutor);
  }
  catch(error){
    divResultado.innerHTML = error +"&lt;p&gt;Error al cargar la biblioteca&lt;/p&gt;";
  }
});
</pre>
<br>
<br>
<br>

			<h1 id="h10">Carga din√°mica de un script</h1>
			<p>
Si por alguna raz√≥n no queremos utilizar m√≥dulos (o no podemos por tener que dar soporte a navegadores antiguos o por ser una biblioteca que no usa m√≥dulos), tambi√©n podemos realizar la carga din√°mica de ficheros javascript usando m√©todos algo m√°s silvestres.
</p>
<br>
<p>
<b>Nota</b>: algunas <i>build tools</i> como Vite pueden transpilar el c√≥digo de los m√≥dulos en √∫nico fichero que navegadores antiguos pueden utilizar. Frameworks como React o Vue tambi√©n lo hacen.
</p>
<br>
<p>
Supongamos que necesitamos cargar el c√≥digo que est√° en el fichero <tt>biblioteca.js</tt>:
</p>
<pre>
"use strict";

function saludo(){
  console.log("Hola caracola");
}
const autor = "Javier Mancera";
</pre>
<br>
<p>
Fichero <tt>code.js</tt> con carga din√°mica del fichero <tt>biblioteca.js</tt>:
</p>
<pre>
"use strict";

const cargarJS = (url , bibliotecaCargada) =&gt; {
  return new Promise(  (resolve, reject) =&gt;{
    // Comprobar si la biblioteca ya est√° cargada
    if (bibliotecaCargada) {
      resolve();
    } else {
    // Crear el elemento script
      var script = document.createElement('script');

      // Asignar la URL de la biblioteca SheetJS al atributo src del elemento script
      script.src = url;

      // A√±adir un evento load que resuelve la promesa cuando la biblioteca est√° cargada
      script.addEventListener('load', resolve);
      script.addEventListener('error', reject);

      // A√±adir el elemento script al documento
      document.body.appendChild(script);
    }
  });
}

// Variable cerrojo para saber si se carg√≥ o no la biblioteca
let bibliotecaSaludoCargada = false;


document.querySelector("#btnCargarJS").addEventListener("click", async e=&gt;{
  try{
    await cargarJS("biblioteca.js", bibliotecaSaludoCargada );
    saludo();
    console.info("El autor es "+ autor);
    bibliotecaSaludoCargada = true;
  }
  catch(error){
    console.error("Error al cargar la biblioteca");
  }
});
</pre>
<br>
<p>
F√≠jate que el script <tt>code.js</tt> no tiene que ser un m√≥dulo (por eso colocamos el <tt>use strict</tt>) y que aunque se pulse varias veces el bot√≥n de carga, no se a√±aden varias copias del fichero <tt>biblioteca.js</tt> al <tt>&lt;body&gt;</tt>. 
</p>
<br>
<p>
<img src="./7b_-_Cargar_JS_din√°micamente_files/pasted_image001.png">
</p>
<br>
<br>
<p>
<b>Tarea de ampliaci√≥n</b>: en el c√≥digo de arriba, es tarea del <tt>eventListener</tt> el llevar el control de si la biblioteca fue cargada mediante una variable cerrojo (<tt>bibliotecaSaludoCargada)</tt>. ¬øC√≥mo podr√≠as hacer que fuera la funci√≥n <tt>cargarJS()</tt> la que llevara el control?
</p>
<br>
<br>

            
						<pre class="codigo">
Abajo puedes ver una pista para el ejercicio. Pi√©nsalo antes de pulsar el bot√≥n.
							<div class="codigojs" style="display:none">let s = `&lt;p&gt;Pista: haz que en lugar de recibir dos variables, reciba un objeto con los datos de 
la biblioteca a cargar: la url y si ya se ha cargado o no.&lt;/p&gt;
&lt;p&gt;De esta manera podr√°s modificar desde la funci√≥n la variable, porque al pasarse como 
parte de un objeto se pasar√° por referencia y no por valor.&lt;/p&gt;
&lt;p&gt;
// Variable cerrojo para saber si se carg√≥ o no la biblioteca
let biblioteca = {
  bibliotecaCargada: false,
  url: "./biblioteca.js"
};
&lt;/p&gt;
`;
resultado.innerHTML=s;
									</div>
					<div class="codigoresultado"></div>
<input class="codigoboton" type="button" value="Ejecutar">
				</pre>
				
            
							<h1 id="h13">Ejercicios</h1>
			<p>
<b>Ejercicio 7b-1:</b> Crea una web que contenga un <tt>&lt;input type="number" id="temperatura"&gt;</tt>, un bot√≥n y una divisi√≥n de resultado. Cuando se pulse el bot√≥n cargar√° din√°micamente un m√≥dulo que contendr√° tres funciones, usar√° las funciones con el dato que el usuario haya escrito en el <tt>&lt;input&gt;</tt> e imprimir√° el resultado en la divisi√≥n.
</p>
<br>
<p>
Las tres funciones del m√≥dulo ser√°n las siguientes:
</p>
<ul style='padding-left: 30pt'>
<li><tt>celsiusAFahrenheit(temperatura)</tt></li>
<li><tt>fahrenheitACelsius(temperatura)</tt></li>
<li><tt>celsiusAKelvin(temperatura)</tt></li>
</ul>
<br>
<br>
<p>
<b>Ejercicio 7b-2</b>: Utiliza la biblioteca <a href="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js" title="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js" class="https">https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js</a> para que ejecutar la funci√≥n <tt>fireConfetti</tt> cuando se pulse un bot√≥n. Abajo hay un trozo de c√≥digo que lo usa, pero no tiene por qu√© ser eficiente, f√≠jate que se carga siempre. ¬øC√≥mo podemos modificarlo para que la biblioteca de confetti se cargue s√≥lo cuando se ha pulsado el bot√≥n?
</p>
<pre>
import('https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js');

function fireConfetti(event) {
	const x = event.clientX / document.body.clientWidth;
	const y = event.clientY / document.body.clientHeight;
	confetti({origin: {x, y}});
}

document.querySelector("#btnAccion").addEventListener("click", async e=&gt;{
  fireConfetti(e); // ¬°Fire Confetti! üéâ
});
</pre>
<br>
<p>
Nota: esta biblioteca est√° preparada para ser consumida como m√≥dulo, pero sus funciones, como <tt>confetti()</tt>, se convierten en funciones globales.
</p>
<br>
<br>
<p>
<b>Ejercicio 7b-3</b>: Otro ejemplo de biblioteca simp√°tica es Rough Notation (<a href="https://roughnotation.com/" title="https://roughnotation.com/" class="https">https://roughnotation.com/</a>). ¬øPuedes leer la documentaci√≥n y usarla de manera que cuando se pulse sobre el bot√≥n se cargue la biblioteca y cree un rect√°ngulo alrededor del propio bot√≥n?
</p>
<br>

            
						<pre class="codigo">
Posible soluci√≥n: Intenta leer la documentaci√≥n para resolver el ejercicio.
							<div class="codigojs" style="display:none">let s = `document.querySelector("#btnAccion").addEventListener("click", async e=&gt;{
  try{
    const { annotate } = await import('https://unpkg.com/rough-notation?module');
    const annotation = annotate(e.target, { type: 'box', padding:[20,20,20,20] });
    annotation.show();
  }
  catch(error){
    alert(error);
  }
});
`;
resultado.innerHTML=s;
									</div>
					<div class="codigoresultado"></div>
<input class="codigoboton" type="button" value="Ejecutar">
				</pre>
				
            
				<p>
<b>Ejercicio 7b-4</b>: Intenta utilizar din√°micamente la biblioteca <a href="https://sweetalert2.github.io/" title="https://sweetalert2.github.io/" class="https">https://sweetalert2.github.io/</a> para mostrar di√°logos y notificaciones.<br>
<img src="./7b_-_Cargar_JS_din√°micamente_files/pasted_image_260107.png">
</p>
<br>
<p>
<b>Ejercicio avanzado 7b-5</b>: Para almacenar informaci√≥n de manera permanente en el cliente podemos usar cookies o localStorage, pero tambi√©n existe la opci√≥n est√°ndar IndexedDB, que permite usar una base de datos no relacional directamente desde el navegador y sin las limitaciones de tama√±o de localStorage. Lamentablemente su uso es bastante complejo, pero podemos ayudarnos de librer√≠as como <tt>Dexie</tt> (<a href="https://github.com/dexie/Dexie.js?tab=readme-ov-file" title="https://github.com/dexie/Dexie.js?tab=readme-ov-file" class="https">https://github.com/dexie/Dexie.js?tab=readme-ov-file</a>).
</p>
<br>
<p>
El objetivo de este ejercicio es usar Dexie para almacenar una lista de asignaturas (id, nombre, dificultad).
</p>
<br>
<p>
<b>Ejercicio avanzado 7b-6</b>: Usa Zod (<a href="https://zod.dev/" title="https://zod.dev/" class="https">https://zod.dev/</a>) para validar formularios.
</p>
<pre>
document.querySelector("#btnAccion").addEventListener("click", async e=&gt;{
try {
    // Apuntamos a la versi√≥n 4
    const { z } = await import('https://cdn.jsdelivr.net/npm/zod@4/+esm');

    const PerroSchema = z.object({
      nombre: z.string().min(3, "El nombre es muy corto"),
      email: z.string().email(),
      edad: z.number().min(0).max(20),
      esBueno: z.boolean()
    });
    
    const datosDelUsuario = {
      nombre: "Aria",
      email: "aria@guau.com",
      edad: 3,
      esBueno: true
    };

    const validacion = PerroSchema.safeParse(datosDelUsuario);

    if (validacion.success) {
      console.log("‚úÖ Datos correctos:", validacion.data);
      alert("¬°Perro validado correctamente!");
    } else {
      console.error("‚ùå Errores de validaci√≥n:", validacion.error.format());
      alert("Los datos del perro no son v√°lidos.");
    }

  } catch (error) {
    console.error("No se pudo cargar Zod 4", error);
  }
});

</pre>
<br>
<p>
<b>Ejemplo de uso 7b-7</b>: Swappy (<a href="https://swapy.tahazsh.com/" title="https://swapy.tahazsh.com/" class="https">https://swapy.tahazsh.com/</a>) es una biblioteca que permite crear interfaces drag &amp; drop con unas pocas l√≠neas de c√≥digo.
</p>
<br>
<p>
JS (cargado como m√≥dulo):
</p>
<pre>
const container = document.querySelector(".container");
await import ("https://unpkg.com/swapy/dist/swapy.min.js")
const swapy = Swapy.createSwapy(container)
</pre>
<br>
<p>
HTML:
</p>
<pre>
&lt;div class="container"&gt;
  &lt;div class="section-1" data-swapy-slot="foo"&gt;
	&lt;div class="content-a" data-swapy-item="a"&gt;
	  &lt;!-- Your content for content-a goes here --&gt;
	   &lt;p&gt;Javier Mancera&lt;/p&gt;
	&lt;/div&gt;
  &lt;/div&gt;

  &lt;div class="section-2" data-swapy-slot="bar"&gt;
	&lt;div class="content-b" data-swapy-item="b"&gt;
	  &lt;!-- Your content for content-b goes here --&gt;
	  &lt;div class="handle" data-swapy-handle&gt;üëáüèº&lt;/div&gt;
	  &lt;p&gt;Este se arrastra con la mano.&lt;/p&gt;
	  &lt;ul&gt;
		&lt;li&gt;Gato&lt;/li&gt;
		&lt;li&gt;Zorro&lt;/li&gt;
		&lt;li&gt;Caballo&lt;/li&gt;
		&lt;li&gt;Gallo&lt;/li&gt;
		&lt;li&gt;Perro&lt;/li&gt;
		&lt;li&gt;Vaca&lt;/li&gt;
	  &lt;/ul&gt;

	&lt;/div&gt;
  &lt;/div&gt;

  &lt;div class="section-3" data-swapy-slot="baz"&gt;
	&lt;div class="content-c" data-swapy-item="c"&gt;
	  &lt;!-- Your content for content-c goes here --&gt;
	   &lt;p&gt;Hola caracola&lt;/p&gt; 
	&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</pre>
<br>
<p>
CSS:
</p>
<pre>
.container{
   display: grid; grid-template-columns: 1fr 1fr;
   gap: 1rem;
}

.container &gt; div{
  border: 2px solid white;
  cursor: pointer;
  color: white;
  background-color: rgb(72, 45, 133);
  min-height: 7rem;
  display:grid;
  place-content: center;
  user-select: none;
}

.container &gt; div:nth-child(2){
  background-color: rgb(100, 28, 74);
}

.container &gt; div:nth-child(3){
  background-color: navy;
}
</pre>
<br>




<!-- Wiki content -->

<!--
Lo separo con espacios entre el [ y el % para que no genere de nuevo el contenido
[ % FOR page IN pages % ]
	[ % page.content % ]
[ % END % ]
-->
<!-- End wiki content -->

</div>

<div id="volver">
    <a href="#">‚¨ÜÔ∏è</a>
</div>

    <script defer>
    let ancho=90;
    btnAmpliar.addEventListener('click', e=>{
        ancho+=12;
        document.querySelector("#contenido").style.maxWidth = ancho+'ch';
        document.querySelector("#sumario").style.maxWidth = ancho+'ch';
    });
    btnReducir.addEventListener('click', e=>{
        ancho-=12;
        document.querySelector("#contenido").style.maxWidth = ancho+'ch';
        document.querySelector("#sumario").style.maxWidth = ancho+'ch';
    });
    
    let sumarioOculto = true;
    btnSumario.addEventListener('click', e=>{
        sumarioOculto = !sumarioOculto;
        if(sumarioOculto)document.querySelector("#sumario").style.display='none';
        else document.querySelector("#sumario").style.display='block'
    });
    
    
    //Resaltado de sintaxis
    // first, find all the div.code blocks
	document.querySelectorAll('div.zim-object pre code').forEach(el => {
		//el lenguaje de programaci√≥n aparece el primero en la classlist
		let lang = el.classList[0];
  		// then highlight each
  		hljs.highlightElement(el,{language: lang});
	});


	//recorremos cada bot√≥n para el c√≥digo que se ha generado.
	//el bot√≥n tiene un padre con el c√≥digo (que es hermano del bot√≥n).
	document.querySelectorAll( "input.codigoboton").forEach( el =>{
	   let elemcodigo = el.parentElement.firstElementChild;
	   let resultado = el.parentElement.firstElementChild.nextElementSibling;
		el.addEventListener('click', e=>{ eval(elemcodigo.innerText); });
	});
   </script>
   <div id="pie">
   <p>Javier Mancera Fern√°ndez<br>
   <a href="https://www.youtube.com/@Profesorinfo-x">https://www.youtube.com/@Profesorinfo-x</a></p>
   </div>
</body>

</html>
